<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>报警处置列表</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #1890ff;
            --bg-color: #f5f7fa;
            --white: #ffffff;
            --text-main: #333333;
            --text-sub: #999999;
            --border-color: #eeeeee;
            --nav-height: 44px;
            --status-bar-height: 20px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            padding-top: calc(var(--status-bar-height) + var(--nav-height) + 44px);
            overflow-x: hidden;
        }

        .fixed-header { position: fixed; top: 0; left: 0; width: 100%; z-index: 90; background-color: var(--white); }
        .status-bar { height: var(--status-bar-height); display: flex; justify-content: space-between; align-items: center; padding: 0 15px; font-size: 12px; font-weight: 600; }
        .top-nav { height: var(--nav-height); display: flex; align-items: center; justify-content: space-between; padding: 0 15px; border-bottom: 1px solid var(--border-color); }
        .nav-left { width: 60px; font-size: 16px; cursor: pointer; }
        .nav-title { font-size: 17px; font-weight: 600; }
        .nav-right { width: 60px; text-align: right; cursor: pointer; color: var(--primary-color); font-size: 18px; }

        .tab-header { display: flex; height: 44px; background: var(--white); box-shadow: 0 2px 4px rgba(0,0,0,0.02); }
        .tab-item { flex: 1; display: flex; align-items: center; justify-content: center; font-size: 14px; color: var(--text-sub); position: relative; cursor: pointer; }
        .tab-item.active { color: var(--primary-color); font-weight: 500; }
        .tab-item.active::after { content: ''; position: absolute; bottom: 0; width: 30px; height: 2px; background-color: var(--primary-color); left: 50%; transform: translateX(-50%); }

        .list-container { padding: 15px; padding-bottom: 30px; }
        .card { background: var(--white); border-radius: 8px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.03); cursor: pointer; transition: background 0.2s; position: relative; }
        .card:active { background: #f9f9f9; }
        
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; padding-bottom: 8px; border-bottom: 1px dashed var(--border-color); }
        .card-title { font-weight: 600; font-size: 15px; display: flex; align-items: center; }
        
        .alarm-tag { font-size: 10px; padding: 2px 6px; border-radius: 4px; margin-left: 8px; white-space: nowrap; }
        .tag-red { background: #fff1f0; color: #ff4d4f; border: 1px solid #ffa39e; }
        .tag-orange { background: #fff7e6; color: #fa8c16; border: 1px solid #ffd591; }
        .tag-green { background: #f6ffed; color: #52c41a; border: 1px solid #b7eb8f; }
        .tag-blue { background: #e6f7ff; color: #1890ff; border: 1px solid #91d5ff; } /* 待处置状态 */
        
        .card-time { font-size: 12px; color: var(--text-sub); }

        .card-grid { display: grid; grid-template-columns: 1.2fr 1fr; gap: 4px 10px; }
        .info-item { display: flex; font-size: 12px; line-height: 1.6; overflow: hidden; }
        .info-label { color: var(--text-sub); width: 60px; flex-shrink: 0; }
        .info-val { color: var(--text-main); flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .full-row { grid-column: span 2; }

        #list-handled { display: none; }
    </style>
</head>
<body>

    <div class="fixed-header">
        <div class="status-bar">
            <div>14:20</div>
            <div><i class="fas fa-signal"></i> <i class="fas fa-wifi"></i> <i class="fas fa-battery-full"></i></div>
        </div>
        <div class="top-nav">
            <div class="nav-left" onclick="window.location.href='index.html'"><i class="fas fa-chevron-left"></i></div>
            <div class="nav-title">报警处置</div>
            <div class="nav-right"><i class="fas fa-filter"></i></div>
        </div>
        <div class="tab-header">
            <div class="tab-item active" onclick="switchTab('pending', this)">待处置 (2)</div>
            <div class="tab-item" onclick="switchTab('handled', this)">已处置 (1)</div>
        </div>
    </div>

    <!-- 待处置列表 -->
    <div class="list-container" id="list-pending">
        <!-- 卡片 1 (带排查信息) -->
        <div class="card" onclick="goToDetail({
            title: '振动超限', level: '二级报警', levelColor: 'red',
            stype: '桥梁', sname: '长江大桥', dtype: '传感器', dname: '振动传感器01',
            ptype: '振动监测', pname: '桥面中段测点', val: '5.2 mm/s', range: '0-5.0 mm/s',
            source: '系统自动', time: '2023-10-27 10:23:00', 
            checkInfo: '经现场核查，传感器固定螺丝松动，已复位，但数值仍偏高，需进一步调整。',
            status: 'pending'
        })">
            <div class="card-header">
                <div class="card-title"><i class="fas fa-exclamation-triangle" style="color: #ff4d4f; margin-right: 5px;"></i>振动超限<span class="alarm-tag tag-red">二级报警</span></div>
                <div class="card-time">10:23</div>
            </div>
            <div class="card-grid">
                <div class="info-item"><span class="info-label">结构类型</span><span class="info-val">桥梁</span></div>
                <div class="info-item"><span class="info-label">结构名称</span><span class="info-val">长江大桥</span></div>
                <div class="info-item"><span class="info-label">设备类型</span><span class="info-val">传感器</span></div>
                <div class="info-item"><span class="info-label">设备名称</span><span class="info-val">振动传感器01</span></div>
                <div class="info-item"><span class="info-label">测点类型</span><span class="info-val">振动监测</span></div>
                <div class="info-item"><span class="info-label">测点名称</span><span class="info-val">桥面中段测点</span></div>
                <div class="info-item"><span class="info-label">报警值</span><span class="info-val" style="color:red">5.2 mm/s</span></div>
                <div class="info-item"><span class="info-label">正常范围</span><span class="info-val">0-5.0 mm/s</span></div>
                <!-- 新增：排查信息 -->
                <div class="info-item full-row"><span class="info-label">排查信息</span><span class="info-val" style="color:#1890ff">经现场核查，传感器固定螺丝松动...</span></div>
                <div class="info-item full-row"><span class="info-label">开始时间</span><span class="info-val">10-27 10:23:00</span></div>
            </div>
        </div>

        <!-- 卡片 2 -->
        <div class="card" onclick="goToDetail({
            title: '温度异常', level: '三级报警', levelColor: '#fa8c16',
            stype: '桥梁', sname: '引桥B段', dtype: '传感器', dname: '温度传感器03',
            ptype: '环境监测', pname: '东侧测点', val: '85°C', range: '-20-60°C',
            source: '系统自动', time: '2023-10-27 09:15:00',
            checkInfo: '线路老化导致短路发热。',
            status: 'pending'
        })">
            <div class="card-header">
                <div class="card-title"><i class="fas fa-thermometer-half" style="color: #fa8c16; margin-right: 5px;"></i>温度异常<span class="alarm-tag tag-orange">三级报警</span></div>
                <div class="card-time">09:15</div>
            </div>
            <div class="card-grid">
                <div class="info-item"><span class="info-label">结构类型</span><span class="info-val">桥梁</span></div>
                <div class="info-item"><span class="info-label">结构名称</span><span class="info-val">引桥B段</span></div>
                <div class="info-item"><span class="info-label">设备类型</span><span class="info-val">传感器</span></div>
                <div class="info-item"><span class="info-label">设备名称</span><span class="info-val">温度传感器03</span></div>
                <div class="info-item"><span class="info-label">测点类型</span><span class="info-val">环境监测</span></div>
                <div class="info-item"><span class="info-label">测点名称</span><span class="info-val">东侧测点</span></div>
                <div class="info-item"><span class="info-label">报警值</span><span class="info-val" style="color:#fa8c16">85°C</span></div>
                <div class="info-item"><span class="info-label">正常范围</span><span class="info-val">-20-60°C</span></div>
                <div class="info-item full-row"><span class="info-label">排查信息</span><span class="info-val" style="color:#1890ff">线路老化导致短路发热。</span></div>
                <div class="info-item full-row"><span class="info-label">开始时间</span><span class="info-val">10-27 09:15:00</span></div>
            </div>
        </div>
    </div>

    <!-- 已处置列表 -->
    <div class="list-container" id="list-handled">
        <div class="card" onclick="goToDetail({
            title: '水位超限', level: '一级报警', levelColor: 'red',
            stype: '隧道', sname: '隧道泵房', dtype: '传感器', dname: '液位计L-02',
            ptype: '水文监测', pname: '积水坑', val: '1.5 m', range: '0-1.0 m',
            source: '系统自动', time: '2023-10-27 08:45:12',
            checkInfo: '水泵故障，无法自动排水。',
            handleInfo: '更换了备用水泵，测试排水正常，报警已消除。',
            status: 'handled'
        })">
            <div class="card-header">
                <div class="card-title"><i class="fas fa-water" style="color: #ff4d4f; margin-right: 5px;"></i>水位超限<span class="alarm-tag tag-green">已处置</span></div>
                <div class="card-time">08:45</div>
            </div>
            <div class="card-grid">
                <div class="info-item"><span class="info-label">结构类型</span><span class="info-val">隧道</span></div>
                <div class="info-item"><span class="info-label">结构名称</span><span class="info-val">隧道泵房</span></div>
                <div class="info-item"><span class="info-label">设备类型</span><span class="info-val">传感器</span></div>
                <div class="info-item"><span class="info-label">设备名称</span><span class="info-val">液位计L-02</span></div>
                <div class="info-item"><span class="info-label">测点类型</span><span class="info-val">水文监测</span></div>
                <div class="info-item"><span class="info-label">测点名称</span><span class="info-val">积水坑</span></div>
                <div class="info-item"><span class="info-label">报警值</span><span class="info-val" style="color:red">1.5 m</span></div>
                <div class="info-item"><span class="info-label">正常范围</span><span class="info-val">0-1.0 m</span></div>
                <div class="info-item full-row"><span class="info-label">排查信息</span><span class="info-val" style="color:#1890ff">水泵故障，无法自动排水。</span></div>
                <div class="info-item full-row"><span class="info-label">开始时间</span><span class="info-val">10-27 08:45:12</span></div>
            </div>
        </div>
    </div>

    <script>
        function switchTab(type, el) {
            document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
            el.classList.add('active');
            document.getElementById('list-pending').style.display = type === 'pending' ? 'block' : 'none';
            document.getElementById('list-handled').style.display = type === 'handled' ? 'block' : 'none';
        }

        // 跳转到报警处置详情页
        function goToDetail(data) {
            sessionStorage.setItem('handleAlarm', JSON.stringify(data));
            window.location.href = 'alarm_handle_detail.html';
        }
    </script>
</body>
</html>